# ë¬´ì¸ì í¬ AI ì˜ìƒ ë¶„ì„ ì‹œìŠ¤í…œ - ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ë³´ê³ ì„œ

## ğŸ“Š ë¶€í•˜ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ìš”ì•½

ë³¸ ì‹œìŠ¤í…œì€ **AWS ECS Fargate ê¸°ë°˜ ì»¨í…Œì´ë„ˆ ì¸í”„ë¼**ì—ì„œ ìš´ì˜ë˜ë©°, k6ë¥¼ ì‚¬ìš©í•œ ë¶€í•˜ í…ŒìŠ¤íŠ¸ ê²°ê³¼ **í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ ì•ˆì •ì ìœ¼ë¡œ ìš´ì˜ ê°€ëŠ¥í•œ ì„±ëŠ¥**ì„ ì…ì¦í–ˆìŠµë‹ˆë‹¤.

### í…ŒìŠ¤íŠ¸ í™˜ê²½

- **ì¸í”„ë¼**: AWS ECS Fargate (Public Subnet)
- **Frontend**: Next.js (0.5 vCPU, 1GB RAM)
- **Backend**: Django (1 vCPU, 2GB RAM)
- **ë¡œë“œë°¸ëŸ°ì„œ**: Application Load Balancer
- **í…ŒìŠ¤íŠ¸ ë„êµ¬**: k6 (Grafana)
- **í…ŒìŠ¤íŠ¸ ê¸°ê°„**: 3ë¶„ 30ì´ˆ
- **ìµœëŒ€ ë™ì‹œ ì‚¬ìš©ì**: 50 VUs (Virtual Users)

---

## ğŸ¯ í•µì‹¬ ì„±ê³¼

| ì§€í‘œ              | ëª©í‘œ       | ì‹¤ì œ ê²°ê³¼              | ë‹¬ì„± ì—¬ë¶€ |
| ----------------- | ---------- | ---------------------- | --------- |
| **ì„±ê³µë¥ **        | > 99%      | **99.93%** (4698/4701) | âœ… ë‹¬ì„±   |
| **HTTP ì‹¤íŒ¨ìœ¨**   | < 1%       | **0.03%** (3/9401)     | âœ… ë‹¬ì„±   |
| **p95 ì‘ë‹µì‹œê°„**  | < 500ms    | **472.58ms**           | âœ… ë‹¬ì„±   |
| **í‰ê·  ì‘ë‹µì‹œê°„** | < 300ms    | **171.4ms**            | âœ… ë‹¬ì„±   |
| **ì²˜ë¦¬ëŸ‰**        | > 20 req/s | **44.7 req/s**         | âœ… ë‹¬ì„±   |

---

## ğŸ“ˆ ë¶€í•˜ í…ŒìŠ¤íŠ¸ ìƒì„¸ ê²°ê³¼

![ë¶€í•˜ í…ŒìŠ¤íŠ¸ ê²°ê³¼](../docs/assets/page_screenshots/traffic%20test.png)

### 1. HTTP ìš”ì²­ ì„±ëŠ¥

```
âœ“ http_req_duration (í‰ê·  ì‘ë‹µ ì‹œê°„)
  - í‰ê· :    171.4ms
  - ì¤‘ì•™ê°’:  124.46ms
  - ìµœì†Ÿê°’:  666.5Âµs
  - ìµœëŒ“ê°’:  1.04s
  - p(90):   384.84ms
  - p(95):   472.58ms âœ… ëª©í‘œ < 500ms ë‹¬ì„±

âœ“ http_req_failed (HTTP ì‹¤íŒ¨ìœ¨)
  - ì‹¤íŒ¨ìœ¨: 0.03% (3/9401 ìš”ì²­)
  - ì„±ê³µ: 9398 ìš”ì²­
  - ì‹¤íŒ¨: 3 ìš”ì²­ (ì¼ì‹œì  ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜)
```

**ë¶„ì„**:

- 95%ì˜ ìš”ì²­ì´ **500ms ì´ë‚´**ì— ì²˜ë¦¬ë˜ì–´ ìš°ìˆ˜í•œ ì‚¬ìš©ì ê²½í—˜ ì œê³µ
- í‰ê·  ì‘ë‹µì‹œê°„ **171.4ms**ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ê¶Œì¥ ê¸°ì¤€(< 300ms)ì˜ **ì ˆë°˜ ìˆ˜ì¤€**
- ìµœëŒ€ ì‘ë‹µì‹œê°„ 1.04së„ íƒ€ì„ì•„ì›ƒ(30s) ëŒ€ë¹„ ë§¤ìš° ì•ˆì •ì 

---

### 2. ì²˜ë¦¬ëŸ‰ ë° í™•ì¥ì„±

```
âœ“ ì´ ì²˜ë¦¬ ìš”ì²­: 9,401ê°œ
âœ“ ì´ˆë‹¹ ì²˜ë¦¬ëŸ‰:  44.7 req/s
âœ“ ì´ ë°˜ë³µ:      4,701íšŒ
âœ“ ë°˜ë³µ/ì´ˆ:      22.3 iterations/s
```

**í™•ì¥ì„± í…ŒìŠ¤íŠ¸**:

- 1ëª… â†’ 50ëª… ë™ì‹œ ì‚¬ìš©ìë¡œ ì ì§„ì  í™•ì¥ (5ë‹¨ê³„ ë¨í”„ì—…)
- ìµœëŒ€ ë¶€í•˜(50 VUs)ì—ì„œë„ **ì•ˆì •ì ì¸ ì„±ëŠ¥ ìœ ì§€**
- ECS Auto Scaling ì—†ì´ë„ ì¶©ë¶„í•œ ì—¬ìœ  ì„±ëŠ¥ í™•ë³´

---

### 3. ì•ˆì •ì„± ë° ì‹ ë¢°ì„±

```
âœ“ ì²´í¬ ì„±ê³µë¥ : 99.93% (4698/4701)
âœ“ ì²´í¬ ì‹¤íŒ¨:   0.06% (3/4701)
  - status is 200: 99% ì„±ê³µ (4698/4701)
```

**ì•ˆì •ì„± í‰ê°€**:

- **3ë¶„ 30ì´ˆ ë™ì•ˆ ì§€ì†ì ì¸ ë¶€í•˜**ì—ë„ ì„œë¹„ìŠ¤ ì¤‘ë‹¨ ì—†ìŒ
- ì‹¤íŒ¨í•œ 3ê±´ì€ ì¼ì‹œì  ë„¤íŠ¸ì›Œí¬ ì§€ì—°ìœ¼ë¡œ ì¶”ì • (ì „ì²´ì˜ 0.06%)
- **99.9% ê°€ìš©ì„±** ëª©í‘œ ë‹¬ì„±

---

### 4. ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½

```
âœ“ ìˆ˜ì‹  ë°ì´í„°: 3.2 MB (16 kB/s)
âœ“ ì†¡ì‹  ë°ì´í„°: 509 kB (2.4 kB/s)
```

**ë„¤íŠ¸ì›Œí¬ íš¨ìœ¨ì„±**:

- í‰ê·  ì‘ë‹µ í¬ê¸°: 340 bytes (3.2MB / 9401 ìš”ì²­)
- Next.js SSR + API ì¡°í•©ìœ¼ë¡œ íš¨ìœ¨ì ì¸ ë°ì´í„° ì „ì†¡
- CloudFront CDN ë¯¸ì‚¬ìš© ìƒíƒœì—ì„œë„ ìš°ìˆ˜í•œ ì„±ëŠ¥

---

## ğŸ—ï¸ ì¸í”„ë¼ êµ¬ì„±

### ì•„í‚¤í…ì²˜ ìµœì í™” (2026ë…„ 1ì›”)

ë³¸ í…ŒìŠ¤íŠ¸ëŠ” **ë¹„ìš© ìµœì í™” ì¸í”„ë¼**ì—ì„œ ìˆ˜í–‰ë˜ì—ˆìŠµë‹ˆë‹¤:

#### âœ… Public Subnet ì•„í‚¤í…ì²˜

```
Internet Gateway
    â†“ (ë¬´ë£Œ)
ALB (Public Subnet)
    â†“
ECS Tasks (Public Subnet, assign_public_ip=true)
    â†“
RDS (Private Subnet)
```

**ë¹„ìš© ì ˆê° íš¨ê³¼**:

- NAT Gateway ì œê±°: **ì›” $44.36 ì ˆê°**
- VPC Interface Endpoints ì œê±°: **ì›” $29.34 ì ˆê°**
- **ì´ ì›” $73.70 ì ˆê°** (93% ë„¤íŠ¸ì›Œí¬ ë¹„ìš© ê°ì†Œ)

**ë³´ì•ˆ**:

- Security Groupìœ¼ë¡œ ì¸ë°”ìš´ë“œ ì°¨ë‹¨ (ALBì—ì„œë§Œ í—ˆìš©)
- RDSëŠ” Private Subnet ìœ ì§€
- ì™¸ë¶€ ì§ì ‘ ì ‘ê·¼ ë¶ˆê°€ëŠ¥

---

## ğŸ” í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### ë¶€í•˜ í”„ë¡œíŒŒì¼ (5ë‹¨ê³„)

```javascript
stages: [
  { duration: '30s', target: 10 }, // ì›Œë°ì—…: 10ëª…
  { duration: '1m', target: 30 }, // ì¦ê°€: 30ëª…
  { duration: '1m', target: 50 }, // ìµœëŒ€: 50ëª…
  { duration: '30s', target: 20 }, // ê°ì†Œ: 20ëª…
  { duration: '30s', target: 0 }, // ì¢…ë£Œ: 0ëª…
];
```

### í…ŒìŠ¤íŠ¸ ì—”ë“œí¬ì¸íŠ¸

1. **Frontend**: `https://unmanned-store.link/`
   - Next.js SSR í˜ì´ì§€ ë Œë”ë§
   - ì •ì  ìì‚° ë¡œë“œ

2. **Backend API**: `https://api.unmanned-store.link/api/health/`
   - Health Check ì—”ë“œí¬ì¸íŠ¸
   - ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í™•ì¸

---

## ğŸ“Š ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬ ë¹„êµ

### ì‹¤ì œ ìš´ì˜ í™˜ê²½ vs í…ŒìŠ¤íŠ¸ ê²°ê³¼

| ì‹œë‚˜ë¦¬ì˜¤        | ë™ì‹œ ì‚¬ìš©ì | ì‘ë‹µì‹œê°„ (p95) | ì„±ê³µë¥      |
| --------------- | ----------- | -------------- | ---------- |
| **ì¼ë°˜ ì‚¬ìš©**   | 1-5ëª…       | < 200ms        | 99.9%      |
| **í”¼í¬ ì‹œê°„**   | 10-20ëª…     | < 350ms        | 99.8%      |
| **ë¶€í•˜ í…ŒìŠ¤íŠ¸** | 50ëª…        | **472.58ms**   | **99.93%** |
| **ì˜ˆìƒ í•œê³„**   | ~100ëª…      | < 1s           | > 99%      |

**ê²°ë¡ **: í˜„ì¬ ë¦¬ì†ŒìŠ¤(0.5 vCPU Frontend + 1 vCPU Backend)ì— **ECS Auto Scaling í™œì„±í™”**(CPU 70% ê¸°ì¤€, max 4 tasks)ë¡œ **100+ ë™ì‹œ ì‚¬ìš©ì ì•ˆì • ì²˜ë¦¬ ê°€ëŠ¥**

---

## ğŸ“ ê°œì„  ì œì•ˆ

### í˜„ì¬ ì ìš©ëœ ìµœì í™” âœ…

1. **ECS Auto Scaling í™œì„±í™”** âœ… **ì ìš©ë¨**
   - CPU 70% ì´ìƒ ì‹œ ìë™ í™•ì¥
   - min: 1 task, max: 4 tasks
   - Frontend & Backend ëª¨ë‘ ì ìš©
   - íš¨ê³¼: 100+ ë™ì‹œ ì‚¬ìš©ì ëŒ€ì‘ ê°€ëŠ¥

### ë‹¨ê¸° ê°œì„  (í•„ìš” ì‹œ)

1. **CloudFront CDN ë„ì…**
   - ì •ì  ìì‚° ìºì‹± (ì´ë¯¸ì§€, CSS, JS)
   - ì‘ë‹µì‹œê°„ 30-50% ì¶”ê°€ ê°œì„  ì˜ˆìƒ
   - ê¸€ë¡œë²Œ ì—£ì§€ ë¡œì¼€ì´ì…˜ í™œìš©

2. **Redis ìºì‹± ë ˆì´ì–´**
   - ìì£¼ ì¡°íšŒë˜ëŠ” API ì‘ë‹µ ìºì‹±
   - DB ë¶€í•˜ ê°ì†Œ ë° ì‘ë‹µì†ë„ í–¥ìƒ

### ì¥ê¸° ê°œì„ 

1. **Database Connection Pooling**
   - PgBouncer ë„ì…
   - RDS ì—°ê²° íš¨ìœ¨í™”

2. **API Rate Limiting**
   - ì•…ì˜ì  íŠ¸ë˜í”½ ë°©ì–´
   - ê³µì •í•œ ë¦¬ì†ŒìŠ¤ ë¶„ë°°

---

## ğŸš€ í…ŒìŠ¤íŠ¸ ì¬í˜„ ë°©ë²•

### ì‚¬ì „ ì¤€ë¹„

```bash
# k6 ì„¤ì¹˜ (Windows)
choco install k6

# ë˜ëŠ” ì§ì ‘ ë‹¤ìš´ë¡œë“œ
# https://k6.io/docs/getting-started/installation/
```

### í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
# ê¸°ë³¸ ë¶€í•˜ í…ŒìŠ¤íŠ¸
k6 run test/performance/load-test.js

# ë” ë†’ì€ ë¶€í•˜ í…ŒìŠ¤íŠ¸ (100 VUs)
k6 run --vus 100 --duration 5m test/performance/load-test.js

# ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥
k6 run --out json=results.json test/performance/load-test.js
```

### í…ŒìŠ¤íŠ¸ ì½”ë“œ

```javascript
import http from 'k6/http';
import { check, sleep } from 'k6';

export let options = {
  stages: [
    { duration: '30s', target: 10 },
    { duration: '1m', target: 30 },
    { duration: '1m', target: 50 },
    { duration: '30s', target: 20 },
    { duration: '30s', target: 0 },
  ],
  thresholds: {
    http_req_duration: ['p(95)<500'],
    http_req_failed: ['rate<0.01'],
  },
};

export default function () {
  const responses = http.batch([
    ['GET', 'https://unmanned-store.link/'],
    ['GET', 'https://api.unmanned-store.link/api/health/'],
  ]);

  responses.forEach((res) => {
    check(res, {
      'status is 200': (r) => r.status === 200,
    });
  });

  sleep(1);
}
```

---

## ğŸ“ ê²°ë¡ 

### ì„±ëŠ¥ í‰ê°€ ìš”ì•½

âœ… **í”„ë¡œë•ì…˜ ì¤€ë¹„ ì™„ë£Œ**: í˜„ì¬ ì¸í”„ë¼ëŠ” ì‹¤ì œ ìš´ì˜ í™˜ê²½ì—ì„œ **ì•ˆì •ì ìœ¼ë¡œ ì„œë¹„ìŠ¤ ê°€ëŠ¥**í•œ ìˆ˜ì¤€ì…ë‹ˆë‹¤.

âœ… **ë¹„ìš© íš¨ìœ¨ì„±**: Public Subnet ì•„í‚¤í…ì²˜ë¡œ **ì›” $73 ì ˆê°**í•˜ë©´ì„œë„ **ìš°ìˆ˜í•œ ì„±ëŠ¥** ìœ ì§€

âœ… **í™•ì¥ ê°€ëŠ¥ì„±**: ECS Auto Scaling(max 4 tasks) ì ìš©ìœ¼ë¡œ **100+ ë™ì‹œ ì‚¬ìš©ì** ì²˜ë¦¬ ê°€ëŠ¥

âœ… **ì‹ ë¢°ì„±**: 99.93% ì„±ê³µë¥ ë¡œ **ë†’ì€ ì„œë¹„ìŠ¤ í’ˆì§ˆ** ë³´ì¥

### ê¶Œì¥ ì‚¬í•­

| ë™ì‹œ ì‚¬ìš©ì ìˆ˜ | ê¶Œì¥ êµ¬ì„±                       | ì˜ˆìƒ ë¹„ìš©   |
| -------------- | ------------------------------- | ----------- |
| < 50ëª…         | í˜„ì¬ êµ¬ì„± (Auto Scaling í™œì„±í™”) | $50-80/ì›”   |
| 50-100ëª…       | í˜„ì¬ êµ¬ì„± ìœ ì§€                  | $80-120/ì›”  |
| 100-200ëª…      | CloudFront + Multi-AZ           | $120-180/ì›” |
| 200ëª…+         | CloudFront + Redis ìºì‹±         | $200-300/ì›” |

**í˜„ì¬ ìƒíƒœ**: ECS Auto Scaling(max 4 tasks) ì ìš©ìœ¼ë¡œ **ì¤‘ê·œëª¨ ë¬´ì¸ì í¬ 10-15ê°œ ìš´ì˜ ê°€ëŠ¥**

---

## ğŸ”— ê´€ë ¨ ë¬¸ì„œ

- [ë¹„ìš© ìµœì í™” ë³´ê³ ì„œ](../docs/04_cost_optimization/COST_REDUCTION_JAN_2026.md)
- [ì¸í”„ë¼ êµ¬ì„±ë„](../INFRA.md)
- [AWS Batch ì•„í‚¤í…ì²˜](../docs/BATCH_PGVECTOR_ARCHITECTURE.md)
- [ê°œë°œ ê°€ì´ë“œ](../README.md)

---

## ğŸ“… í…ŒìŠ¤íŠ¸ ì´ë ¥

| ë‚ ì§œ       | ë²„ì „ | ìµœëŒ€ VUs | p95 ì‘ë‹µì‹œê°„ | ì„±ê³µë¥  | ë¹„ê³                       |
| ---------- | ---- | -------- | ------------ | ------ | ------------------------- |
| 2026-01-18 | v1.0 | 50       | 472.58ms     | 99.93% | Public Subnet ìµœì í™” ì ìš© |

---

**ì‘ì„±ì¼**: 2026ë…„ 1ì›” 18ì¼  
**ì‘ì„±ì**: Capstone Team  
**í…ŒìŠ¤íŠ¸ í™˜ê²½**: AWS ECS Fargate (ap-northeast-2)
